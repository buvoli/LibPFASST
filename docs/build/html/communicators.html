
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>LibPFASST communicators &#8212; LIBPFASST 1.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">LIBPFASST 1.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="libpfasst-communicators">
<h1>LibPFASST communicators<a class="headerlink" href="#libpfasst-communicators" title="Permalink to this headline">¶</a></h1>
<p>LibPFASST includes several (time) communicators:</p>
<ul class="simple">
<li><p>MPI</p></li>
<li><p>fake</p></li>
</ul>
<p>The MPI communicator is the most actively developed and maintained.
The fake communicator is used for convergence testing (convergence
tests across many ‘fake’ cores can be performed on one core).</p>
<p>The number time steps taken <span class="math notranslate nohighlight">\(N\)</span> should be an integer multiple of the
number of PFASST processors <span class="math notranslate nohighlight">\(P\)</span> used.  If more time steps are taken
then PFASST processors used, the default behaviour of LibPFASST is to
operate in <code class="docutils literal notranslate"><span class="pre">PF_WINDOW_BLOCK</span></code> mode.</p>
<p>In <code class="docutils literal notranslate"><span class="pre">PF_WINDOW_BLOCK</span></code> mode, <span class="math notranslate nohighlight">\(P\)</span> time steps are taken at a time.  Once these <span class="math notranslate nohighlight">\(P\)</span>
steps are completed, the final solution on the last time processor is
broadcast to all time processors (and is received as a new initial
condition) and the PFASST algorithm is started over (including the
predictor stage) again.  This process is repeated <span class="math notranslate nohighlight">\(N/P\)</span> times
until all <span class="math notranslate nohighlight">\(N\)</span> time steps are complete.  This means that the first
processor may be idle for a time while it waits for the last processor
to finish (due to the burn in time associated with the predictor step)
after each block of <span class="math notranslate nohighlight">\(P\)</span> time steps are computed.</p>
<p>Alternatively, in <code class="docutils literal notranslate"><span class="pre">PF_WINDOW_RING</span></code> mode, when a processor is finished iterating
on the time step that it is operating on, it moves itself to one time
step beyond the last processor.</p>
<p>At the beginning of each PFASST iteration (before receive requests are
posted) each processor: (i) determines if it has converged by checking
residuals, and (ii) receives a status message (this is blocking so
that the status send/recv stage is done in serial).  This status
message contains two pieces of information: whether the previous
processor is finished iterating (in which case the previous processor
will move itself to the end of the line), and how many of of the
previous processors are going to move to the end of the line.</p>
<p>If all residual conditions are met AND the previous processor is done
iterating, the current processor will decide that it is done iterating
too.  It will then send this information to the next processor (and
bump up the number of processors that are going to move by one).</p>
<p>If a processor is done iterating, then it will move to the end of the
line.  To do this, it does a blocking probe for a message with the
special “nmoved” tag and with source <code class="docutils literal notranslate"><span class="pre">MPI_ANY_SOURCE</span></code>.  This special
message is sent by the first processor that is still iterating <em>and</em>
whose previous processor moved, <strong>or</strong> by the last processor in the
event that all processors finished at the same iteration.  In this
case, even though the last processor is done iterating, it will do one
final iteration before moving so that normal communication can
proceed.</p>
<p>In any case, all processors rotate their first/last markers by the
number of processors that moved.</p>
<p>Finally, if a processor steps beyond the number of requested time
steps it stop iterating.  In this case, other processors move their
last marker accordingly so that they do not include stopped processors
in their communications.</p>
<div class="section" id="mpi">
<h2>MPI<a class="headerlink" href="#mpi" title="Permalink to this headline">¶</a></h2>
<p>The PFASST MPI communicator can be used in conjunction with spatial
MPI communications.  The user is responsible for splitting
<code class="docutils literal notranslate"><span class="pre">MPI_COMM_WORLD</span></code> appropriately (this can be done, eg, using a simple
colouring algorithm).</p>
<p>To support the <code class="docutils literal notranslate"><span class="pre">PF_WINDOW_RING</span></code> mode, the MPI communicator maintains the
<code class="docutils literal notranslate"><span class="pre">first</span></code> and <code class="docutils literal notranslate"><span class="pre">last</span></code> integers to keep track of the MPI ranks
corresponding to the first and last processors in the current block.</p>
<p>At the beginning of each PFASST iteration the MPI communicator posts
receive requests on all PFASST levels.</p>
</div>
<div class="section" id="fake">
<h2>fake<a class="headerlink" href="#fake" title="Permalink to this headline">¶</a></h2>
<p>The PFASST fake communicator allows us to study the convergence
behaviour of PFASST in <code class="docutils literal notranslate"><span class="pre">PF_WINDOW_BLOCK</span></code> mode using only a single core.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">LibPFASST communicators</a><ul>
<li><a class="reference internal" href="#mpi">MPI</a></li>
<li><a class="reference internal" href="#fake">fake</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/communicators.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="index.html">LIBPFASST 1.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2018, Matthew Emmett, Michael Minion, Brandon Krull, Sebastian Goetschel, Francois Hamon.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.
    </div>
  </body>
</html>